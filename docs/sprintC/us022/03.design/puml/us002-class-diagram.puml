@startuml

skinparam packageStyle rectangle
skinparam shadowing false
skinparam linetype polyline
skinparam linetype orto
skinparam classAttributeIconSize 0

class ToDoList {
    - taskDescription: String
    - urgency: String
    - expectedDuration: int
    - greenSpaceName: String
    - status: String
    - userEmail: String

    + ToDoList(taskDescription: String, urgency: String, expectedDuration: int, greenSpaceName: String, status: String, userEmail: String)
    + getTaskDescription(): String
    + getUrgency(): String
    + getExpectedDuration(): int
    + getGreenSpaceName(): String
    + getStatus(): String
    + getUserEmail(): String
    + setStatus(status: String): void
}

class ToDoListRepository {
    - toDoLists: List<ToDoList>

    + add(toDoList: ToDoList): Optional<ToDoList>
    + getAllToDoLists(): List<ToDoList>
    + updateToDoListEntry(updatedEntry: ToDoList): void
    + findByTaskDescription(taskDescription: String): Optional<ToDoList>
    + findByUserEmailAndGreenSpaceName(userEmail: String, greenSpaceName: String): List<ToDoList>
}

class GreenSpace {
    - name: String
    - managerEmail: String

    + GreenSpace(name: String, managerEmail: String)
    + getName(): String
    + getManagerEmail(): String
}

class GreenSpaceRepository {
    - greenSpaces: List<GreenSpace>

    + add(greenSpace: GreenSpace): Optional<GreenSpace>
    + getAllGreenSpaces(): List<GreenSpace>
    + findByManagerEmail(email: String): List<GreenSpace>
}

class Agenda {
    - taskDescription: String
    - greenSpaceName: String
    - expectedDate: LocalDate
    - status: String

    + Agenda(taskDescription: String, greenSpaceName: String, expectedDate: LocalDate, status: String)
    + getTaskDescription(): String
    + getGreenSpaceName(): String
    + getExpectedDate(): LocalDate
    + getStatus(): String
}

class AgendaRepository {
    - agendas: List<Agenda>

    + add(agenda: Agenda): Optional<Agenda>
    + getAllAgendas(): List<Agenda>
    + findByGreenSpace(greenSpace: GreenSpace): List<Agenda>
}

class AgendaController {
    - agendaRepository: AgendaRepository
    - toDoListRepository: ToDoListRepository
    - greenSpaceRepository: GreenSpaceRepository

    + AgendaController()
    + createAgendaEntry(taskDescription: String, greenSpaceName: String, expectedDate: LocalDate, status: String, teamProposal: TeamProposal): Optional<Agenda>
    + getGreenSpaces(userEmail: String): List<GreenSpace>
    + getToDoListEntries(userEmail: String, greenSpaceName: String): List<ToDoList>
}

class AgendaUI {
    - userEmail: String
    - agendaController: AgendaController
    - teamProposal: TeamProposal

    + AgendaUI(userEmail: String)
    + run(): void
    + requestSelection(scanner: Scanner, size: int, type: String): int
}

class ApplicationSession {
    + static getInstance(): ApplicationSession
    + getCurrentSession(): UserSession
}

class UserSession {
    + getUserEmail(): String
}

class Repositories {
    + static getInstance(): Repositories
    + getToDoListRepository(): ToDoListRepository
    + getGreenSpaceRepository(): GreenSpaceRepository
    + getAgendaRepository(): AgendaRepository
}

ApplicationSession --> UserSession : userSession
AgendaController ..> ApplicationSession : uses
AgendaController ..> UserSession : uses
AgendaController ..> Repositories : instance
AgendaUI .> AgendaController : uses
AgendaController --> Agenda : 0..*

ToDoListRepository --> ToDoList : 0..*
GreenSpaceRepository --> GreenSpace : 0..*
AgendaRepository --> Agenda : 0..*
Repositories --> ToDoListRepository : 1
Repositories --> GreenSpaceRepository : 1
Repositories --> AgendaRepository : 1

@enduml
